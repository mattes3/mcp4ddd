import { Err, Ok, type Result } from 'ts-results-es';
import z from 'zod';

import { type Branded } from '{{basicTypesFrom}}';
import { zodValidationError } from '{{basicErrorTypesFrom}}';

import { type {{serviceErrorType}} } from './{{serviceErrorType}}s.js';

const {{serviceParametersSchema}} = z.object({
    {{{serviceParametersAsZodSchema}}}
});

export type {{serviceParametersType}} = {{{validatedParametersType}}};

export function parse{{serviceParametersType}}(
    params: { {{formattedParametersWithAnyTypes}} }
): {{{wrappedServiceParametersType}}} {
    const result = {{serviceParametersSchema}}.safeParse(params);
    return result.success
        ? Ok(result.data as {{serviceParametersType}})
        : Err(zodValidationError(result.error));
}
